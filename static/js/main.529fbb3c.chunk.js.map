{"version":3,"sources":["img/logo.jpg","components/context.js","js/helper.js","components/SplashScreen.js","components/header/Searchbar.js","components/Header.js","js/api.js","components/article/ArticleMenu.js","components/article/ArticleListItem.js","components/article/ArticleList.js","components/routes/Home.js","components/routes/Likes.js","components/routes/Recent.js","components/routes/Tag.js","components/routes/Tags.js","js/toc.js","components/article/LikeBtn.js","components/routes/Article.js","components/routes/SearchResult.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","createContext","Provider","Consumer","withContext","Component","props","react_default","a","createElement","value","Object","assign","handleLocalStore","_ref","key","Storage","localStorage","setItem","getItem","stripTags","string","split","map","tag","tid","title","SplashScreen","state","open","canDie","Transition","index_es","direction","_this2","this","minLiveTime","console","log","setTimeout","setState","oldProps","newProps","classes","fullScreen","TransitionComponent","transitionDuration","enter","exit","className","paper","src","Logo","logo","alt","progress","color","withStyles","theme","_logo","textAlign","padding","spacing","unit","background","palette","primary","main","maxWidth","defineProperty","breakpoints","up","maxHeight","button","margin","withRouter","search","position","borderRadius","shape","backgroundColor","fade","common","white","&:hover","marginLeft","width","searchIcon","height","pointerEvents","display","alignItems","justifyContent","inputRoot","inputInput","paddingTop","paddingRight","paddingBottom","paddingLeft","transition","transitions","create","&:focus","Search_default","placeholder","onKeyPress","e","target","history","handleSearch","push","root","input","menu","icon","Home_default","route","Bookmarks_default","Star_default","History_default","AppHeader","drawer","toggleDrawer","_this","handleMenu","event","anchorEl","currentTarget","handleClose","sideList","list","item","ItemIcon","component","Link","to","badgeContent","likedArticles","length","onClose","onOpen","tabIndex","role","onClick","onKeyDown","toolbar","menuButton","aria-label","Menu_default","variant","grow","header_Searchbar","isLoading","React","flexGrow","marginRight","mixins","apiUrl","process","nodeReq","ids","cb","requestUrl","concat","join","GET","searchReq","q","endpoint","termReq","response","fetch","then","res","json","data","catch","err","ArticleMenu","liked","checkLike","includes","nid","handleClick","handleLike","toggleLike","match","path","handleShare","share","_this$state","Boolean","likeIcon","StarBorder_default","likeText","react","aria-owns","undefined","aria-haspopup","MoreVert_default","id","menuItem","inset","Share_default","Menu","article_ArticleMenu","timeStamp","node","tags","i","arr","secondary","changed","Date","toLocaleString","ArticleListItem_Menu","text","articles","nodes","Fragment","article_ArticleListItem","setHeadLine","loading","updateNodes","article_ArticleList","Likes","headline","headLine","marginBottom","marginTop","Recent","recentArticles","Tag","params","term","tagReq","TagList","sort","b","nameA","toUpperCase","nameB","injectToc","wrapper","document","innerHTML","toc","getElementsByClassName","alphabetical","classList","contains","numerals","headingNodes","getElementsByTagName","tocLinks","textList","links","link","add","setAttribute","innerText","generateTocLinks","nodeList","getText","addIds","addNumerals","addHref","dir","tocList","listElement","append","generateTocList","addEventListener","preventDefault","getElementById","slice","offset","offsetTop","offsetParent","window","scrollTo","top","behavior","scrollintoView","attributes","href","LikeBtn","likeColor","size","fab","bottom","right","Like","article_LikeBtn","Article","addRecent","heading","gutterBottom","dangerouslySetInnerHTML","__html","body","SearchResult","App","user","name","renderSplashscreen","filter","v","indexOf","index","splice","removeNode","getContext","objectSpread","react_router_dom","basename","components_SplashScreen","Header","container","xs","react_router","exact","Home","Tags","@global","code, pre","grey","overflowX","fontFamily","ul","location","hostname","createMuiTheme","type","brandSecondary","A400","black","default","typography","useNextVariants","ReactDOM","render","core_styles","CssBaseline_default","src_App","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.529fbb3c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.21514315.jpg\";","import React, { createContext } from 'react';\n\nexport const { Provider, Consumer } = createContext();\n\nexport const withContext = Component =>\n    props => <Consumer>\n        {value => <Component {...value} {...props} /> }\n    </Consumer>","// custom helper functions\n\nexport const handleLocalStore = ({ key, value }) => {\n    if (typeof (Storage) === \"undefined\") return;\n\n    if(key && value) localStorage.setItem(key, value);\n    return localStorage.getItem(key);\n}\n\nexport const toLocalDate = (timeStamp) => {\n    const date = new Date(timeStamp * 1000);\n    // const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    // return (`${date.getDate()}. ${months[date.getMonth()]} ${date.getFullYear()}`);\n    return date.toLocaleString()\n} \n\nexport const stripTags = string => {\n    return string.split(', ').map(tag => {\n        return {\n            tid: tag.split(':')[0],\n            title: tag.split(':')[1],\n        }\n    });\n}\n\nexport const orderByTitle = arr => {\n    return arr.sort(function (a, b) {\n        var nameA = a.title.toUpperCase(); // ignore upper and lowercase\n        var nameB = b.title.toUpperCase(); // ignore upper and lowercase\n        if (nameA < nameB) return -1;\n        if (nameA > nameB) return 1;\n        return 0;\n    });\n}","import React, { Component } from 'react';\n\nimport PropTypes from 'prop-types';\nimport Logo from '../img/logo.jpg';\n\nimport { withStyles, Dialog, DialogContent, Slide, LinearProgress, Grid } from '@material-ui/core';\n\n\nconst styles = theme => ({\n    paper: {\n        textAlign: 'center',\n        padding: theme.spacing.unit,\n        background: theme.palette.primary.main,\n    },\n    logo: {\n        maxWidth: '100%',\n        [theme.breakpoints.up('sm')]: {\n            maxHeight: '600px',\n        },\n        [theme.breakpoints.up('lg')]: {\n            maxHeight: '700px',\n        },\n    },\n    progress: {\n        // margin: theme.spacing.unit,\n    },\n    button: {\n        margin: theme.spacing.unit / 2,\n    },\n});\n\n\nclass SplashScreen extends Component {\n    state = {\n        open: true,\n        canDie: false,\n    }\n\n    componentDidMount() {\n        const minLiveTime = (this.props.minLiveTime)? this.props.minLiveTime: 800;\n        console.log('Splash minLiveTime', minLiveTime);\n        \n        setTimeout(() => {\n            this.setState({ canDie: true });\n        }, minLiveTime);\n    }\n\n    componentDidUpdate(oldProps) {\n        const newProps = this.props\n        if (oldProps.open !== newProps.open) {\n            this.setState({ open: false })\n            // console.log('new props');\n        }\n    }\n\n    Transition = (props) => {\n        return <Slide direction=\"up\" {...props} />;\n    }\n\n    render() {\n        const { classes } = this.props;\n        const open = (!this.state.open && this.state.canDie)? false : true;\n\n        return (\n            <Dialog\n                fullScreen\n                open={open}\n                TransitionComponent={this.Transition}\n                transitionDuration={{ enter: 0, exit: 250 }}>\n\n                <DialogContent className={classes.paper} >\n                    <img src={Logo} className={classes.logo} alt=\"Wiki - Logo\" />\n                    <LinearProgress className={classes.progress} color=\"secondary\" />\n                </DialogContent>\n\n            </Dialog>\n        );\n    }\n}\n\nSplashScreen.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(SplashScreen);\n","import React from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport { withContext } from '../context';\n\nimport PropTypes from 'prop-types';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\n\nimport { withStyles, InputBase } from '@material-ui/core';\n\nconst styles = theme => ({\n    search: {\n        position: 'relative',\n        borderRadius: theme.shape.borderRadius,\n        backgroundColor: fade(theme.palette.common.white, 0.15),\n        '&:hover': {\n            backgroundColor: fade(theme.palette.common.white, 0.25),\n        },\n        marginLeft: theme.spacing.unit * 2,\n        width: '100%',\n        [theme.breakpoints.up('sm')]: {\n            marginLeft: theme.spacing.unit,\n            width: 'auto',\n        },\n    },\n    searchIcon: {\n        width: '48px',\n        height: '100%',\n        position: 'absolute',\n        pointerEvents: 'none',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    inputRoot: {\n        color: 'inherit',\n        width: '100%',\n    },\n    inputInput: {\n        paddingTop: theme.spacing.unit,\n        paddingRight: theme.spacing.unit,\n        paddingBottom: theme.spacing.unit,\n        paddingLeft: '50px',\n        transition: theme.transitions.create('width'),\n        width: '100%',\n        [theme.breakpoints.up('sm')]: {\n            width: 120,\n            '&:focus': {\n                width: 200,\n            },\n        }, \n    },\n});\n\nconst Searchbar = (props) => {\n    const { classes } = props;\n\n    const handleEnter = (e) => {\n        console.log('search', e.target.value);\n\n        const { history } = props;\n        if (e.key === 'Enter') {\n            props.handleSearch(e.target.value);\n            e.target.value = '';\n            history.push('/search');\n        }\n    }\n    \n    return (\n        <div className={classes.search}>\n            <div className={classes.searchIcon}>\n                <SearchIcon />\n            </div>\n            <InputBase\n                placeholder=\"Search…\"\n                onKeyPress={handleEnter}\n                classes={{\n                    root: classes.inputRoot,\n                    input: classes.inputInput,\n                }}\n            />\n        </div>\n    )\n}\n\nSearchbar.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withRouter(withContext(withStyles(styles)(Searchbar)));","import React from 'react';\nimport { withRouter, Link } from \"react-router-dom\";\nimport { withContext } from './context';\n\nimport Searchbar from './header/Searchbar';\n\nimport PropTypes from 'prop-types';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport HomeIcon from '@material-ui/icons/Home';\nimport BookmarksIcon from '@material-ui/icons/Bookmarks';\nimport StarIcon from '@material-ui/icons/Star';\nimport HistoryIcon from '@material-ui/icons/History';\n\nimport {\n  AppBar,\n  Badge,\n  Divider,\n  IconButton,\n  LinearProgress,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  SwipeableDrawer,\n  Toolbar,\n  Typography,\n  withStyles,\n} from '@material-ui/core';\n\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20,\n  },\n  list: {\n    width: 250,\n  },\n  toolbar: theme.mixins.toolbar,\n  \n});\n\nconst menu = [{\n  title: 'Home',\n  icon: <HomeIcon />,\n  route: '/'\n}, {\n  title: 'Tags',\n  icon: <BookmarksIcon />,\n  route: '/tags'\n}, {\n  title: 'Likes',\n  icon: <StarIcon />,\n  route: '/likes'\n}, {\n  title: 'Recent',\n  icon: <HistoryIcon />,\n  route: '/recent'\n}];\n\nclass AppHeader extends React.Component {\n  state = {\n    drawer: false,\n  };\n\n  toggleDrawer = (open) => () => {\n    this.setState({ drawer: open });\n  };\n\n  handleMenu = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  handleClose = () => {\n    this.setState({ anchorEl: null });\n  };\n\n  render() {\n    const { classes } = this.props;\n\n    // Drawer Menu\n    const sideList = (\n      <List className={classes.list}>\n        {menu.map((item) => {\n          const ItemIcon = item.icon;\n          return (\n            (item.title !== 'Likes') ?\n              <ListItem button key={item.title} component={Link} to={item.route} >\n                <ListItemIcon>\n                  {ItemIcon}\n                </ListItemIcon>\n                <ListItemText primary={item.title} />\n              </ListItem>\n              :\n              <ListItem button key={item.title} component={Link} to={item.route} >\n                <ListItemIcon>\n                  <Badge color=\"secondary\" badgeContent={this.props.likedArticles.length}>\n                    {ItemIcon}\n                  </Badge>\n                </ListItemIcon>\n                <ListItemText primary={item.title} />\n              </ListItem>\n          );\n        })}\n      </List>\n    );\n\n    return (\n      <div>\n\n        <SwipeableDrawer\n          className={classes.drawer}\n          open={this.state.drawer}\n          onClose={this.toggleDrawer(false)}\n          onOpen={this.toggleDrawer(true)} >\n          <div\n            tabIndex={0}\n            role=\"button\"\n            onClick={this.toggleDrawer(false)}\n            onKeyDown={this.toggleDrawer(false)} >\n            <div className={classes.toolbar} />\n            <Divider />\n            {sideList}\n          </div>\n        </SwipeableDrawer>\n\n        <AppBar position=\"static\">\n          <Toolbar>\n            <IconButton\n              className={classes.menuButton}\n              color=\"inherit\"\n              aria-label=\"Menu\"\n              onClick={this.toggleDrawer(true)}>\n              <MenuIcon />\n            </IconButton>\n            <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\n              {true &&\n                'WIKI'\n              } \n            </Typography>\n            <Searchbar/>\n          </Toolbar>\n          {this.props.isLoading && <LinearProgress color=\"secondary\" />}\n        </AppBar>\n      </div>\n    );\n  }\n}\n\nAppHeader.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withContext(withStyles(styles)(AppHeader));\n","const apiUrl = process.env.REACT_APP_API_URL;\nconst delay = (process.env.NODE_ENV === 'development')? 3000 : 0;\n\nexport const nodeReq = (ids, cb) => {\n    const endpoint = `${apiUrl}/api/articles/`;\n    const requestUrl = endpoint + ids.join('+');\n    setTimeout(() => {\n        GET({ requestUrl, cb });\n    }, delay);\n}\n\nexport const searchReq = (q, cb) => {\n    const endpoint = `${apiUrl}/api/search?_q=`;\n    const requestUrl = endpoint + q;\n    GET({ requestUrl, cb });\n}\n\nexport const tagReq = (id, cb) => {\n    const endpoint = `${apiUrl}/api/tag/`;\n    const requestUrl = endpoint + id;\n    setTimeout(() => {\n        GET({ requestUrl, cb });\n    }, delay);\n}\n\nexport const termReq = (tid, cb) => {\n    const endpoint = `${apiUrl}/api/term/`;\n    const requestUrl = endpoint + tid;\n    GET({ requestUrl, cb });\n}\n\nconst GET = ({ requestUrl, cb }) => {\n    let response = null;\n    fetch(requestUrl)\n        .then(res => {\n            response = res;\n            return res.json();\n        })\n        .then(data => cb(data))\n        .catch(err => {\n            console.log('GET ERROR:', err, response);\n            return cb([]);\n        });\n}","import React, { Component, Fragment } from 'react';\nimport { withContext } from '../context';\n\nimport PropTypes from 'prop-types';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport StarIcon from '@material-ui/icons/Star';\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\nimport ShareIcon from '@material-ui/icons/Share';\n\nimport {\n    withStyles,\n    ListItemText,\n    ListItemIcon,\n    Menu,\n    MenuItem,\n    IconButton,\n} from '@material-ui/core';\n\n\nconst styles = theme => ({\n    menuItem: {\n    },\n    primary: {},\n    icon: {},\n});\n\n\nclass ArticleMenu extends Component {\n    state = {\n        anchorEl: null,\n        liked: false,\n    }\n\n    componentDidMount() {\n        const liked = this.checkLike();\n        this.setState({ liked });\n    }\n\n    checkLike = () => this.props.likedArticles.includes(this.props.nid);\n\n    handleClick = event => {\n        this.setState({ anchorEl: event.currentTarget });\n    };\n\n    handleLike = () => {\n        this.props.toggleLike(this.props.nid, this.props.match.path);\n        \n        const liked = this.checkLike();\n        this.setState({ liked });\n        \n        this.handleClose();\n    };\n    \n    handleShare = () => {\n        this.props.share(this.props.nid);\n        this.handleClose();\n    };\n\n    handleClose = () => {\n        this.setState({ anchorEl: null });\n    };\n\n\n    render() {\n        const { classes } = this.props;\n        const { anchorEl, liked } = this.state;\n        const open = Boolean(anchorEl);\n\n        // console.log('like', this.props.likedArticles.includes(this.props.nid) );\n        const likeIcon = (liked) ? <StarIcon /> : <StarBorderIcon />;\n        const likeText = (liked) ? \"Unlike\" : \"Like\";\n\n        return (\n            <Fragment>\n                <IconButton\n                    aria-label=\"More\"\n                    aria-owns={open ? 'long-menu' : undefined}\n                    aria-haspopup=\"true\"\n                    onClick={this.handleClick} >\n                    <MoreIcon />\n                </IconButton>\n                <Menu id=\"simple-menu\" anchorEl={anchorEl} open={open} onClose={this.handleClose} >\n                    <MenuItem onClick={this.handleLike} className={classes.menuItem}>\n                        <ListItemIcon className={classes.icon}>\n                            {likeIcon}\n                        </ListItemIcon>\n                        <ListItemText \n                            classes={{ primary: classes.primary }} inset \n                            primary={likeText} \n                        />\n                    </MenuItem>\n                    <MenuItem onClick={this.handleShare} className={classes.menuItem}>\n                        <ListItemIcon className={classes.icon}>\n                            <ShareIcon />\n                        </ListItemIcon>\n                        <ListItemText classes={{ primary: classes.primary }} inset primary=\"Share\" />\n                    </MenuItem>\n                </Menu>\n            </Fragment>\n        );\n    }\n\n}\n\nArticleMenu.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(withContext(ArticleMenu));","import React from 'react';\nimport { withRouter, Link } from \"react-router-dom\";\n\nimport { toLocalDate, stripTags } from \"./../../js/helper\";\nimport ArticleMenu from './ArticleMenu';\n\nimport PropTypes from 'prop-types';\n\nimport {\n    withStyles,\n    ListItem,\n    ListItemText,\n    ListItemSecondaryAction,\n} from '@material-ui/core';\n\n\nconst styles = theme => ({\n});\n\nconst Menu = withRouter(props => <ArticleMenu {...props} />);\n\nconst ArticleListItem = (props) => {\n\n        const { classes, node } = props;\n\n        const tags = stripTags(node.tags).map((tag, i, arr) => \n                <small key={i}> {'#' + tag.title} </small>\n        );\n\n        return (\n            <ListItem button key={node.nid} component={Link} to={`/article/${node.nid}`} >\n                <ListItemText\n                    primary={node.title}\n                    secondary={<span>{toLocalDate(node.changed)}<br />{tags}</span>}\n                />\n                <ListItemSecondaryAction>\n                    <Menu nid={node.nid} />\n                </ListItemSecondaryAction>\n            </ListItem>\n        );\n}\n\nArticleListItem.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(ArticleListItem);","import React, { Fragment } from 'react';\nimport { withContext } from '../context';\n\nimport ArticleListItem from './ArticleListItem';\n\nimport PropTypes from 'prop-types';\nimport {\n    withStyles,\n    Paper,\n    List,\n    Divider,\n} from '@material-ui/core';\n\n\nconst styles = theme => ({\n    paper: {\n        color: theme.palette.text.secondary,\n    },\n});\n\nconst ArticleList = (props) => {\n    const { classes } = props;\n\n    const articles = props.nodes.map((node, i, arr) => (\n        <React.Fragment key={i}>\n            <ArticleListItem node={node} />\n            {(i !== arr.length - 1) && <Divider /> }\n        </React.Fragment>\n        )\n    );\n\n    return (\n        <Paper className={classes.paper}>\n            <List> {articles} </List>\n        </Paper>\n    );\n}\n\nArticleList.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withContext(withStyles(styles)(ArticleList));\n","import React, { Component, Fragment } from 'react'\nimport { nodeReq } from '../../js/api';\nimport ArticleList from '../article/ArticleList';\nimport { withContext } from '../context';\n\n\nclass Home extends Component {\n\n    componentDidMount() {\n        this.props.setHeadLine('');\n        \n        this.props.loading(true);\n        nodeReq([], nodes => {\n            this.props.updateNodes(nodes);\n            this.props.loading(false);\n        });\n    }\n\n    render() {\n        return (\n            <Fragment>\n                {!this.props.isLoading && this.props.nodes.length > 0 &&\n                    <ArticleList />\n                }\n            </Fragment>\n        )\n    }\n}\n\nexport default withContext(Home);\n","import React, { Component, Fragment } from 'react'\nimport { nodeReq } from '../../js/api';\nimport ArticleList from '../article/ArticleList';\nimport { withContext } from '../context';\n\nimport PropTypes from 'prop-types';\nimport { withStyles, Typography } from '@material-ui/core';\n\nconst styles = theme => ({\n    headline: {\n        marginBottom: theme.spacing.unit,\n        marginTop: theme.spacing.unit,\n    }\n});\n\nclass Likes extends Component {\n\n    componentDidMount() {\n        this.props.setHeadLine('Likes');\n\n        if (this.props.likedArticles.length === 0) { // empty array => all nodes\n            this.props.updateNodes([]);\n            return;\n        }\n        \n        this.props.updateNodes([]);\n        this.props.loading(true);\n        nodeReq(this.props.likedArticles, nodes => {\n            this.props.updateNodes(nodes);\n            this.props.loading(false);\n        });\n    }\n\n    render() {\n        const { classes } = this.props;\n        return (\n            <Fragment>\n                <Typography\n                    component=\"h2\"\n                    variant=\"h4\"\n                    color=\"textSecondary\"\n                    className={classes.headline} >\n                    {this.props.headLine}\n                </Typography>\n                {!this.props.isLoading && this.props.nodes.length > 0 &&\n                    <ArticleList />\n                }\n            </Fragment>\n        );\n    }\n}\n\nLikes.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withContext(withStyles(styles)(Likes));","import React, { Component, Fragment } from 'react'\nimport { nodeReq } from '../../js/api';\nimport ArticleList from '../article/ArticleList';\nimport { withContext } from '../context';\n\nimport PropTypes from 'prop-types';\nimport { withStyles, Typography } from '@material-ui/core';\n\nconst styles = theme => ({\n    headline: {\n        marginBottom: theme.spacing.unit,\n        marginTop: theme.spacing.unit,\n    }\n});\n\nclass Recent extends Component {\n\n    componentDidMount() {\n        this.props.setHeadLine('Recent');\n\n        if (this.props.recentArticles.length === 0) { // empty array => all nodes\n            this.props.updateNodes([]);\n            return;\n        }\n        \n        this.props.updateNodes([]);\n        this.props.loading(true);\n        nodeReq(this.props.recentArticles, nodes => {\n            this.props.updateNodes(nodes);\n            this.props.loading(false);\n        });\n    }\n\n    render() {\n        const { classes } = this.props;\n        return (\n            <Fragment>\n                <Typography\n                    component=\"h2\"\n                    variant=\"h4\"\n                    color=\"textSecondary\"\n                    className={classes.headline} >\n                    {this.props.headLine}\n                </Typography>\n                {!this.props.isLoading && this.props.recentArticles.length > 0 &&\n                    <ArticleList />\n                }\n            </Fragment>\n        );\n    }\n}\n\nRecent.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withContext(withStyles(styles)(Recent));","import React, { Component, Fragment } from 'react';\nimport { withContext } from '../context';\n\nimport { tagReq, termReq } from '../../js/api'\nimport ArticleList from '../article/ArticleList';\n\nimport PropTypes from 'prop-types';\nimport { withStyles, Typography } from '@material-ui/core';\n\n\nconst styles = theme => ({\n    headline: {\n        marginBottom: theme.spacing.unit,\n        marginTop: theme.spacing.unit,\n    }\n});\n\nclass Tag extends Component {\n\n    componentDidMount() {\n        const tid = this.props.match.params.tid;\n\n        termReq(tid, term => this.props.setHeadLine('#' + term[0].title) );\n\n        this.props.loading(true);\n        tagReq(tid, nodes => {\n            this.props.updateNodes(nodes);\n            this.props.loading(false);\n        });\n    }\n\n    render() {\n        const { classes } = this.props;\n\n        return (\n            <Fragment>\n                <Typography\n                    component=\"h2\"\n                    variant=\"h4\"\n                    color=\"textSecondary\"\n                    className={classes.headline} >\n                    {this.props.headLine}\n                </Typography>\n                {!this.props.isLoading &&\n                    <ArticleList />\n                }\n            </Fragment>\n        );\n    }\n}\n\nTag.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withContext(withStyles(styles)(Tag));\n","import React, { Component, Fragment } from 'react';\nimport { Link } from \"react-router-dom\";\nimport { withContext } from '../context';\n\nimport { termReq } from '../../js/api'\nimport { orderByTitle } from '../../js/helper';\n\nimport PropTypes from 'prop-types';\nimport { withStyles, Button, Paper, Typography } from '@material-ui/core';\n\n\nconst styles = theme => ({\n  paper: {\n    textAlign: 'center',\n    padding: theme.spacing.unit,\n  },\n  button: {\n    margin: theme.spacing.unit / 2,\n  },\n  headline: {\n    marginBottom: theme.spacing.unit,\n    marginTop: theme.spacing.unit,\n  },\n});\n\nclass TagList extends Component {\n  state = {\n    tags: []\n  };\n  \n  componentDidMount() {\n    this.props.setHeadLine('Tags');\n\n    this.props.loading(true);\n    termReq('', tags => {\n      this.setState({ tags });\n      this.props.loading(false);\n    });\n  }\n\n  render() {\n    const { classes } = this.props;\n\n    const tags = orderByTitle(this.state.tags).map(tag => {\n      return (\n        <Button \n          key={tag.tid}\n          variant=\"contained\"\n          color=\"secondary\"\n          className={classes.button}\n          component={Link}\n          to={`/tag/${tag.tid}`}>\n          {'#' + tag.title}\n        </Button>\n      );\n    });\n\n    return (\n      <Fragment>\n        <Typography\n          component=\"h2\"\n          variant=\"h4\"\n          color=\"textSecondary\"\n          className={classes.headline} >\n          {this.props.headLine}\n        </Typography>\n        {!this.props.isLoading &&\n          <Paper className={classes.paper}>\n            {tags}\n          </Paper>\n        }\n      </Fragment>\n    );\n  }\n}\n\nTagList.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withContext(withStyles(styles)(TagList));\n","// version = 0.2\n// description = generate a table of contents (toc) on page load\n\nexport const injectToc = (node) => {\n\n    let wrapper = document.createElement('div');\n    wrapper.innerHTML = node;\n\n    const toc = wrapper.getElementsByClassName('table-of-contents')[0];\n    if (toc) console.log('### generate table of contents'); else return wrapper.innerHTML;\n\n    // caching\n    const alphabetical = (toc.classList.contains('alphabetical')) ? true : false;\n    const numerals = (toc.classList.contains('numerals')) ? true : false;\n    const headingNodes = wrapper.getElementsByTagName('h3');\n    const headingsList = getText(headingNodes);\n    const tocLinks = generateTocLinks(headingsList);\n\n    addIds(headingNodes);\n    if (numerals) addNumerals(headingNodes);\n\n    addHref(tocLinks);\n    if (alphabetical) orderAlphabetical(tocLinks);\n    console.dir(tocLinks);\n\n    let tocList = generateTocList(tocLinks);\n    tocList.addEventListener('click', event => {\n            event.preventDefault();\n            var target = ('href' in event.target) ? event.target.attributes.href.value : null;\n            scrollintoView(target);\n            // console.dir(target);\n        });\n\n    toc.innerHTML = '';\n    toc.append(tocList);\n\n    // scroll to top btn\n    // insertToTopBtn(article);\n\n\n    return wrapper.innerHTML;\n}\n\n\nfunction getText(nodeList) {\n    var textList = [];\n    for (var i = 0; i < nodeList.length; i++) {\n        textList.push(nodeList[i].innerText);\n    }\n    return textList;\n}\n\n\nfunction generateTocLinks(textList) {\n    var links = [];\n\n    for (var i = 0; i < textList.length; i++) {\n        var item = textList[i];\n\n        var link = document.createElement('a');\n        link.classList.add('toc-link');\n        link.setAttribute('href', '#toc-' + (i + 1));\n        link.innerText = item;\n\n        links.push(link);\n    }\n    return links;\n}\n\n\nfunction addHref(links) {\n    for (var i = 0; i < links.length; i++) {\n        var link = links[i];\n        link.setAttribute('href', '#toc-' + (i + 1));\n    }\n    return links;\n}\n\n\nfunction generateTocList(nodeList) {\n    var list = document.createElement('ul');\n\n    for (var i = 0; i < nodeList.length; i++) {\n        var item = nodeList[i];\n\n        var listElement = document.createElement('li');\n        listElement.classList.add('toc-item');\n\n        listElement.append(item);\n        list.append(listElement);\n    }\n    return list;\n}\n\n\nfunction orderAlphabetical(nodeList) {\n    var output = nodeList.sort(function (a, b) {\n        var nameA = a.innerText.toUpperCase(); // ignore upper and lowercase\n        var nameB = b.innerText.toUpperCase(); // ignore upper and lowercase\n        if (nameA < nameB) return -1;\n        if (nameA > nameB) return 1;\n        return 0;\n    });\n    // console.log(output);\n    return output;\n}\n\n\nfunction addNumerals(headingNodes) {\n    for (var i = 0; i < headingNodes.length; i++) {\n        headingNodes[i].innerText = (i + 1) + '. ' + headingNodes[i].innerText;\n    }\n}\n\n\nfunction addIds(headingNodes) {\n    for (var i = 0; i < headingNodes.length; i++) {\n        headingNodes[i].id = 'toc-' + (i + 1);\n    }\n}\n\n\nfunction scrollintoView(id) {\n    var target = document.getElementById(id.slice(1, id.length));\n    if (target) {\n        var offset = target.offsetTop + target.offsetParent.offsetTop;\n        window.scrollTo({ top: offset, behavior: 'smooth' });\n    }\n}\n\n\nfunction insertToTopBtn(domNode) {\n    var topBtn = document.createElement('div');\n    topBtn.classList.add('back-to-top-btn', 'btn', 'btn-primary');\n    topBtn.innerText = 'TOP';\n    domNode.appendChild(topBtn);\n\n    topBtn.addEventListener('click', function () {\n        window.scrollTo({ top: 0, behavior: 'smooth' });\n    });\n\n    // console.log('getOffset', getOffset());\n    topBtn.style.left = getOffset();\n\n    var resizeTimer;\n    window.addEventListener('resize', function () {\n        clearTimeout(resizeTimer);\n        resizeTimer = setTimeout(function () {\n            topBtn.style.left = getOffset();\n        }, 250);\n    });\n\n    function getOffset() {\n        var offset = (domNode.offsetLeft + domNode.offsetParent.offsetLeft + domNode.clientWidth - topBtn.clientWidth) + 'px';\n        return offset;\n    }\n}","import React, { Component, Fragment } from 'react';\nimport { withContext } from '../context';\n\nimport PropTypes from 'prop-types';\nimport StarIcon from '@material-ui/icons/Star';\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\n\nimport {\n    withStyles,\n    Fab,\n} from '@material-ui/core';\n\n\nconst styles = theme => ({\n    fab: {\n        position: 'fixed',\n        bottom: theme.spacing.unit,\n        right: theme.spacing.unit * 2,\n    }\n});\n\n\nclass LikeBtn extends Component {\n    state = {\n        liked: false,\n    }\n\n    componentDidMount() {\n        const liked = this.checkLike();\n        this.setState({ liked });\n        // console.log(this.props);\n    }\n\n    checkLike = () => this.props.likedArticles.includes(this.props.nid);\n\n    handleLike = () => {\n        this.props.toggleLike(this.props.nid, this.props.match.path);\n        \n        const liked = this.checkLike();\n        this.setState({ liked });\n    };\n    \n    render() {\n        const { classes } = this.props;\n        const { liked } = this.state;\n\n        const likeIcon = (liked) ? <StarIcon /> : <StarBorderIcon />;\n        const likeText = (liked) ? \"Unlike\" : \"Like\";\n        const likeColor = (liked) ? \"default\" : \"secondary\";\n\n        return (\n            <Fab size=\"large\" \n                color={likeColor} \n                aria-label={likeText} \n                onClick={this.handleLike}\n                className={classes.fab}>\n                {likeIcon}\n            </Fab>\n        );\n    }\n\n}\n\nLikeBtn.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(withContext(LikeBtn));","import React, { Component, Fragment } from 'react';\nimport { withRouter, Link } from \"react-router-dom\";\nimport { withContext } from '../context';\n\nimport { nodeReq } from '../../js/api';\nimport { toLocalDate, stripTags } from \"../../js/helper\";\nimport { injectToc } from '../../js/toc';\nimport LikeBtn from '../article/LikeBtn';\n\nimport PropTypes from 'prop-types';\nimport { withStyles, Typography, Paper, Button, Fab } from '@material-ui/core';\n\n\nconst styles = theme => ({\n    paper: {\n        padding: theme.spacing.unit * 2,\n        position: 'relative',\n    },\n    button: {\n        margin: theme.spacing.unit / 2,\n    },\n});\n\nconst Like = withRouter(props => <LikeBtn {...props} />);\n\nclass Article extends Component {\n\n    componentDidMount() {\n        this.props.setHeadLine('');\n\n        this.props.updateNodes([]);\n        this.props.loading(true);\n        nodeReq([this.props.match.params.nid], nodes => {\n            this.props.updateNodes(nodes);\n            this.props.loading(false);\n            this.props.addRecent(nodes[0].nid);\n        });\n    }\n\n    render() {\n        const { classes } = this.props;\n        const node = this.props.nodes[0];\n        // console.log(node);\n\n        const tags = (node && node.tags) ? stripTags(node.tags).map(tag => {\n            return (\n                <Button\n                    key={tag.tid}\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    className={classes.button}\n                    component={Link}\n                    to={`/tag/${tag.tid}`}>\n                    {'#' + tag.title}\n                </Button>\n            );\n        }) : null;\n\n        return (\n            <Fragment>\n                {node &&\n                    <Paper className={classes.paper}>\n                        <Like nid={node.nid} />\n\n                        <Typography component=\"h1\" variant=\"h4\" className={classes.heading} gutterBottom>\n                            {node.title}\n                        </Typography>\n                        <Typography variant=\"body1\" dangerouslySetInnerHTML={{\n                            __html: injectToc(node.body)\n                        }} />\n                        {tags}\n                    </Paper>\n                }\n                {!this.props.isLoading && !node &&\n                    <Typography component=\"h1\" variant=\"h4\" color=\"textSecondary\" gutterBottom>\n                        No Result\n                    </Typography>\n                }\n            </Fragment>\n        );\n    }\n}\n\nArticle.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withContext(withStyles(styles)(Article));\n","import React, { Component, Fragment } from 'react'\n\nimport { searchReq } from '../../js/api';\nimport ArticleList from '../article/ArticleList';\nimport { withContext } from '../context';\n\nimport PropTypes from 'prop-types';\nimport { withStyles, Typography } from '@material-ui/core';\n\nconst styles = theme => ({\n    headline: {\n        marginBottom: theme.spacing.unit,\n        marginTop: theme.spacing.unit,\n    }\n});\n\nclass SearchResult extends Component {\n\n    componentDidMount() {\n        this.search();\n    }\n\n    componentDidUpdate(oldProps) {\n        const newProps = this.props;\n        if (oldProps.search !== newProps.search) {\n            // this.setState({ open: false })\n            this.search();\n            console.log('new props');\n        }\n    }\n    \n    search = () => {\n        this.props.setHeadLine(`search: ${this.props.search}`);\n        if (this.props.search === '') return; // block empty search\n\n        this.props.loading(true);\n        searchReq(this.props.search, nodes => {\n            this.props.updateNodes(nodes);\n            this.props.loading(false);\n        });\n    }\n\n    render() {\n        const { classes } = this.props;\n        return (\n            <Fragment>\n                <Typography\n                    component=\"h2\"\n                    variant=\"h4\"\n                    color=\"textSecondary\"\n                    className={classes.headline} >\n                    {this.props.headLine}\n                </Typography>\n                {!this.props.isLoading && (this.props.nodes.length > 0) &&\n                    <ArticleList />\n                }\n            </Fragment>\n        )\n    }\n}\n\nSearchResult.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withContext(withStyles(styles)(SearchResult));\n","import React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport { Provider } from './components/context'; \n\nimport { handleLocalStore } from './js/helper';\n\nimport SplashScreen from './components/SplashScreen';\nimport Header from './components/Header';\n\n// routes\nimport Home from './components/routes/Home';\nimport Likes from './components/routes/Likes';\nimport Recent from './components/routes/Recent';\nimport Tag from './components/routes/Tag';\nimport Tags from './components/routes/Tags';\nimport Article from './components/routes/Article';\nimport SearchResult from './components/routes/SearchResult';\n\nimport PropTypes from 'prop-types';\nimport { withStyles, Grid } from '@material-ui/core';\n\n\nconst styles = theme => ({\n  root: {\n    maxWidth: 800,\n    margin: 'auto',\n    padding: theme.spacing.unit,\n  },\n  '@global': {\n    'code, pre': {\n      background: theme.palette.grey[200],\n      padding: 3,\n      overflowX: 'auto',\n      fontFamily: 'source-code-pro, Menlo, Monaco, Consolas, Courier New, monospace',\n    },\n    'ul': {\n      paddingLeft: '1.2em',\n    }\n  }\n});\n\n\nclass App extends Component {\n  state = {\n    headLine: 'Wiki',\n    isLoading: false,\n    user: {\n      id: 0,\n      name: 'Guest',\n    },\n    nodes: [],\n    likedArticles: [],\n    recentArticles: [],\n    search: '',\n    renderSplashscreen: true,\n  }\n\n  componentDidMount() {\n    console.log('### App mountet, Mode:', process.env.NODE_ENV);\n    setTimeout(() => {\n      this.setState({ renderSplashscreen: false });\n    }, 500);\n\n    let likedArticles = handleLocalStore({key: 'likes'});\n    if(likedArticles) {\n      likedArticles = likedArticles.split(',');\n      this.setState({ likedArticles });\n    }\n\n  }\n\n  updateNodes = (nodes) => {\n    this.setState({ nodes });\n  }\n\n  removeNode(nid) {\n    console.log('remove', nid);\n    const nodes = this.state.nodes.filter((node) => {\n      return node.nid !== nid;\n    });\n    this.setState({ nodes });\n  }\n  \n  loading = (isLoading) => {\n    this.setState({ isLoading });\n  }\n\n  addRecent = (nid) => {\n    let recentArticles = this.state.recentArticles;\n    recentArticles.push(nid);\n    recentArticles = recentArticles.filter((v, i, a) => a.indexOf(v) === i);\n    this.setState({ recentArticles });\n  }\n\n  handleSearch = (search) => {\n    // console.log(this.props);\n    this.setState({ search });\n  }\n  \n  setHeadLine = (headLine) => {\n    this.setState({ headLine });\n  }\n  \n  toggleLike = (nid, path) => {\n    let { likedArticles } = this.state;\n    const index = likedArticles.indexOf(nid);\n\n    if (index >= 0) { // unLike\n      likedArticles.splice(index, 1); // remove node from likedArticles\n      if(path === '/likes') this.removeNode(nid); // remove node from view\n    }else { // like\n      likedArticles.push(nid);\n    }\n\n    handleLocalStore({ key: 'likes', value: likedArticles });\n    this.setState({ likedArticles });\n  }\n\n  share = nid => {\n    console.log('share', nid);\n  }\n\n  getContext = () => ({\n    addRecent: this.addRecent,\n    handleSearch: this.handleSearch,\n    loading: this.loading,\n    removeNode: this.removeNode,\n    updateNodes: this.updateNodes,\n    setHeadLine: this.setHeadLine,\n    toggleLike: this.toggleLike,\n    share: this.share,\n    ...this.state,\n  });\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <Router basename=\"/wiki\">\n        <SplashScreen open={this.state.renderSplashscreen} minLiveTime={3000} />\n\n          {!this.state.renderSplashscreen &&\n          <Provider value={this.getContext()}>\n            <Header />\n\n            <Grid container className={classes.root}>\n              <Grid item xs={12}>\n                <Switch>\n                  <Route exact path=\"/\" component={Home} />\n                  <Route exact path=\"/tags\" component={Tags} />\n                  <Route exact path=\"/likes\" component={Likes} />\n                  <Route exact path=\"/recent\" component={Recent} />\n                  <Route path=\"/tag/:tid\" component={Tag} />\n                  <Route path=\"/article/:nid\" component={Article} />\n                  <Route path=\"/search\" component={SearchResult} />\n                  <Route path=\"*\" component={() => \"404 NOT FOUND\"} />\n                </Switch>\n              </Grid>\n            </Grid>\n          </Provider>\n          }\n\n        </Router>\n    );\n  }\n}\n\nApp.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(App);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport 'typeface-roboto';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport { deepPurple as brandPrimary, pink as brandSecondary, grey } from '@material-ui/core/colors';\n\nconst theme = createMuiTheme({\n    type: \"dark\",\n    palette: {\n        primary: {\n            // main: brandPrimary[900],\n            main: '#5300b8',\n        },\n        secondary: {\n            // light: '#0066ff',\n            main: brandSecondary.A400,\n            // dark: will be calculated from palette.secondary.main,\n            // contrastText: brandPrimary[900],\n        },\n        common: {\n            black: \"#fff\",\n            white: \"#000\",\n        },\n        background: {\n            paper: grey[50],\n            default: grey[400],\n        },\n        text: {\n            // disabled: \"rgba(255,255,255, 0.38)\",\n            // hint: \"rgba(255,255,255, 0.38)\",\n            // primary: \"rgba(255,255,255, 0.87)\",\n            // secondary: \"rgba(255,255,255, 0.54)\",\n        },\n        // contrastThreshold: 3,\n        // tonalOffset: 0.2,\n    },\n    shape: {\n        borderRadius: 3,\n    },\n    spacing: {\n        unit: 8,\n    },\n    typography: {\n        useNextVariants: true,\n    },\n});\n\n// console.log(theme);\n\nReactDOM.render(\n    <MuiThemeProvider theme={theme}>\n        <CssBaseline />\n        <App />\n    </MuiThemeProvider>, document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}